# :test_tube: RevisÃ£o de DependÃªncias

<!-- markdownlint-disable MD033 MD046 -->

!!! quote ":octicons-milestone-16: Adicionar VerificaÃ§Ãµes de SeguranÃ§a"

    > A revisÃ£o de dependÃªncias ajuda vocÃª a entender as mudanÃ§as nas dependÃªncias e o impacto de seguranÃ§a dessas mudanÃ§as em cada pull request. Ela fornece uma visualizaÃ§Ã£o facilmente compreensÃ­vel das alteraÃ§Ãµes de dependÃªncias com um diff detalhado na guia "Arquivos Alterados" de um pull request. A revisÃ£o de dependÃªncias informa vocÃª sobre:

    > - Quais dependÃªncias foram adicionadas, removidas ou atualizadas, juntamente com as datas de lanÃ§amento.
    > - Quantos projetos usam esses componentes.
    > - Dados de vulnerabilidade para essas dependÃªncias.

    ![Revisar dependÃªncia](../../assets/img/dependency-review-milestone.png)

---

## ExercÃ­cio: Automatizar a AplicaÃ§Ã£o da RevisÃ£o de DependÃªncias

---

### **:material-numeric-1-circle: Entender as ConfiguraÃ§Ãµes da RevisÃ£o de DependÃªncias**

```yaml title=".github/dependency-review-config.yml"
fail-on-severity: moderate #(1)!

comment-summary-in-pr: always #(2)!

allow-licenses: #(3)!
  - MIT
  - GPL-3.0
  - BSD-3-Clause

deny-licenses: #(4)!
  - LGPL-2.0
  - BSD-2-Clause

allow-ghsas: #(5)!
  - GHSA-abcd-1234-5679
  - GHSA-efgh-1234-5679

fail-on-scopes: #(6)!
  - development
  - runtime
  - unknown
```

1. Valores possÃ­veis: "critical", "high", "moderate", "low"
2. Publicar resumo como um comentÃ¡rio no respectivo pull request
3. Permitir apenas as licenÃ§as listadas (opcional). Valores possÃ­veis: Quaisquer valores `spdx_id` de https://docs.github.com/pt/rest/licenses
4. Bloquear o pull request nestas licenÃ§as (opcional). Valores possÃ­veis: Quaisquer valores `spdx_id` de https://docs.github.com/pt/rest/licenses

    :warning: VocÃª sÃ³ pode incluir uma dessas duas opÃ§Ãµes: `allow-licenses` e `deny-licenses`.

5. Ignorar esses IDs do Banco de Dados de Avisos do GitHub durante a detecÃ§Ã£o (opcional). Valores possÃ­veis: Qualquer ID vÃ¡lido do Banco de Dados de Avisos do GitHub de https://github.com/advisories
6. Bloquear pull requests que introduzem vulnerabilidades nos escopos que correspondem a esta lista (opcional). Valores possÃ­veis: "development", "runtime", "unknown"

---

### **:material-numeric-2-circle: Implementar VerificaÃ§Ã£o de RevisÃ£o de DependÃªncias**

Abra o arquivo `.github/workflows/continuous.integration.yml` no editor e adicione o conteÃºdo {== destacado ==} da seguinte forma:

```yaml title=".github/workflows/continuous.integration.yml" linenums="1" hl_lines="58-67"
--8<-- "reference.implementations/workflows/1.2.continuous.integration.yml"
```

---

### **:material-numeric-2-circle: Fazer commit e publicar suas alteraÃ§Ãµes**

Enviar suas alteraÃ§Ãµes aplicarÃ¡ a verificaÃ§Ã£o no pull request existente.

!!! tip "VocÃª pode vincular suas alteraÃ§Ãµes a uma issue"

    Lembre-se da issue que vocÃª criou anteriormente e seu respectivo nÃºmero, vocÃª o usarÃ¡ para vincular suas alteraÃ§Ãµes atuais Ã  issue.

```bash linenums="1"
git add .
git commit -m "$(printf 'Criar um jogo de tetris para impulsionar o engajamento do site\n\n-Adicionar revisÃ£o de dependÃªncias como verificaÃ§Ã£o de seguranÃ§a\n\n- Resolve #<NÃšMERO-DA-ISSUE>')"
git push origin feature/tetris-game
```

{==

Quando vocÃª navegar atÃ© o repositÃ³rio no GitHub e abrir o pull request existente, poderÃ¡ confirmar que a verificaÃ§Ã£o foi executada. Como nÃ£o hÃ¡ violaÃ§Ãµes de conformidade atualmente no PR, a verificaÃ§Ã£o Ã© bem-sucedida.

![Mostrar resultado da revisÃ£o de dependÃªncias](../../assets/img/dependency-review-outcome-01.png)

==}

!!! question "Tarefa para casa"

    VocÃª consegue tentar fazer com que a verificaÃ§Ã£o de revisÃ£o de dependÃªncias falhe?

---

## ğŸ“š Recursos

- [Entendendo sua cadeia de suprimentos de software](https://docs.github.com/pt/code-security/supply-chain-security/understanding-your-software-supply-chain)
- [GitHub Advanced Security - GrÃ¡fico de DependÃªncias](https://docs.github.com/pt/code-security/supply-chain-security/understanding-your-software-supply-chain/about-the-dependency-graph)
